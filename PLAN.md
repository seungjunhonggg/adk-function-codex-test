# 최우선순위 워크플로우 = MLCC,칩 설계를 추천하는 워크플로우. 
0. 사용자와 캐쥬얼채팅 및 사용자가 칩설계(시뮬레이션/추천)을 원할시 시뮬레이션 워크플로우로 라우팅 
1. 시뮬레이션은 총 5단계로 구성되어있음 
1-1. 사용자에게 온도/전압/크기/용량/개발품여부/파우더사이즈 총 6개인자를 입력받음 
1-2. 해당 인자를 칩기종 DB테이블에 검색하여 칩기종 획득(여러개일수 있음) 
** 내용 추가 . 1-1)번에서 칩기종명을 말하며 요청할수도 있는데, 이런경우에는 1-2번까지 절차를 생략하고 입력받은 칩기종으로 바로 1-3번으로 진행.**
1-3. 해당 칩기종들을 핵심설계인자들이 NotNull 이며 불량률인자들이 최소인 조건들(이 조건들도 DB로 목록 및 조건 관리중)로 칩정보db테이블에 검색하여 해당기종들중 불량률조건이 제일좋은 LOT를 레퍼런스로 선정 
1-4.해당 LOT의 설계값을 위아래로 조금씩 변경하며 최적설계조건을 찾는 API에 payload로 보냄 
1-5. api에서 받은 결과물에는 후보군이 최대100개가 있고, 그중 top-k를 선정. (근데 이 k개만해도 json안에 필드값이 무지하게 길다.) 그래서 컨텍스트적인 측면에서 최대한 뒷단계에서 쓸 필요인자들만 추려야함. 
1-6. 이걸가지고 다시 1-3에 있던 칩정보테이블에 top-k 후보들의 동일설계(특정인자4개)값을 최근6개월 이내로 전체 검색 
1-7. 또한 각 top k 별 특정인자4개값 만족하는걸 칩정보있는테이블에 최근 6개월 이내 조건으로 select distrinct로 검색해서 불량률 컬럼들은 각 컬럼별로 평균값 추출 
1-8. 이모든 결과들을 사용자에게 상세브리핑. 브리핑 시에 각 단계별 진행단계에 대해 상세히 설명하고, 1-3, 1-5의 top-k, 1-6, 1-7번은 표를 첨부하여 설명해야하며, 1-7의 불량률은 차트도 첨부되어야한다.
**그리고, 1-7까지의 단계는 다 영어컬럼명인데, 상세브리핑 시에는 DB에 한글컬럼명이 맵핑된 테이블을 조회하여 브리핑내에서는 영어컬럼명이 하나도 없어야한다. **

2. 사용자가 브리핑을 보고 각 단계에 대해 상세하게 물어보는걸 잘 대답해야하고, 중간단계에 있는걸 바꿔달라하면 유연하게 바꿔서 그다음단계들을 진행해줄줄도 알아야함.

3. 
** 모델은 오픈소스 모델로 모델의 컨텍스트 길이는 10000으로 제한되어있다. **
** 해당 워크플로우가 매끄럽게 구현되면, 이후에는 사용자의 좀더 복합적인 요청 (시뮬레이션 워크플로우 + 다른 신규 워크플로우 복합요청)을 대응할수있도록 개발할 예정 **

## postgreSQL DB를 사용하며, shecma는 data_portal 명칭임.

## 개발은 DB연결 없이도 테스트 가능하도록 데모버전이 존재해야한다. 이때의 데모데이터도 실제처럼 보이면좋다.